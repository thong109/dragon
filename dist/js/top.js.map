{"version":3,"names":[],"mappings":"","sources":["top.js"],"sourcesContent":["gsap.registerPlugin(Observer);\r\n\r\nlet sections = document.querySelectorAll(\"section\"),\r\n  images = document.querySelectorAll(\".is-clippath\"),\r\n  currentIndex = 0,\r\n  animating = false;\r\n\r\nsections.forEach((section, i) => {\r\n  gsap.set(section, {\r\n    top: i * 100 + 'vh'\r\n  });\r\n});\r\n\r\nlet container = document.querySelector('main.main');\r\n\r\nfunction gotoSection(index, direction) {\r\n  // Kiểm tra index hợp lệ trước\r\n  index = Math.max(0, Math.min(index, sections.length - 1));\r\n  \r\n  // Nếu đã ở section đó hoặc đang animate thì return\r\n  if (index === currentIndex || animating) {\r\n    return;\r\n  }\r\n\r\n  animating = true;\r\n  currentIndex = index;\r\n\r\n  let tl = gsap.timeline({\r\n    defaults: {\r\n      duration: 1,\r\n      ease: \"power2.inOut\"\r\n    },\r\n    onComplete: () => {\r\n      animating = false;\r\n    }\r\n  });\r\n\r\n  // Sử dụng percentage thay vì pixel để tính chính xác hơn\r\n  tl.to(container, {\r\n    y: (-index * 100) + 'vh'\r\n  });\r\n}\r\n\r\nObserver.create({\r\n  type: \"wheel,touch,pointer\",\r\n  wheelSpeed: -1,\r\n  onDown: () => !animating && gotoSection(currentIndex - 1, -1),\r\n  onUp: () => !animating && gotoSection(currentIndex + 1, 1),\r\n  tolerance: 50, // Tăng tolerance để tránh trigger nhạy\r\n  preventDefault: true\r\n});\r\n\r\ngsap.set(container, {\r\n  y: 0\r\n});"],"file":"top.js"}